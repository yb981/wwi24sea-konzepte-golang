
<!DOCTYPE html>
<html>
	<head>
		<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
		<title>functions-edsl: Go Coverage Report</title>
		<style>
			body {
				background: black;
				color: rgb(80, 80, 80);
			}
			body, pre, #legend span {
				font-family: Menlo, monospace;
				font-weight: bold;
			}
			#topbar {
				background: black;
				position: fixed;
				top: 0; left: 0; right: 0;
				height: 42px;
				border-bottom: 1px solid rgb(80, 80, 80);
			}
			#content {
				margin-top: 50px;
			}
			#nav, #legend {
				float: left;
				margin-left: 10px;
			}
			#legend {
				margin-top: 12px;
			}
			#nav {
				margin-top: 10px;
			}
			#legend span {
				margin: 0 5px;
			}
			.cov0 { color: rgb(192, 0, 0) }
.cov1 { color: rgb(128, 128, 128) }
.cov2 { color: rgb(116, 140, 131) }
.cov3 { color: rgb(104, 152, 134) }
.cov4 { color: rgb(92, 164, 137) }
.cov5 { color: rgb(80, 176, 140) }
.cov6 { color: rgb(68, 188, 143) }
.cov7 { color: rgb(56, 200, 146) }
.cov8 { color: rgb(44, 212, 149) }
.cov9 { color: rgb(32, 224, 152) }
.cov10 { color: rgb(20, 236, 155) }

		</style>
	</head>
	<body>
		<div id="topbar">
			<div id="nav">
				<select id="files">
				
				<option value="file0">example.com/hi/edsl/functions-edsl/main.go (0.0%)</option>
				
				<option value="file1">example.com/hi/edsl/functions-edsl/maths-func.go (100.0%)</option>
				
				</select>
			</div>
			<div id="legend">
				<span>not tracked</span>
			
				<span class="cov0">not covered</span>
				<span class="cov8">covered</span>
			
			</div>
		</div>
		<div id="content">
		
		<pre class="file" id="file0" style="display: none">package main

import (
        "fmt"
)

func main() <span class="cov0" title="0">{
        fmt.Print("\033[H\033[2J")
        fmt.Printf("-------------------------------------- LIVE DEMO SHOWCASE -----------------------------------\n\n")
        fmt.Printf("----------------------------------------- 1st FUNCTION --------------------------------------\n\n")
        f := Func{Mult{Const{2}, Var{}}}
        fmt.Printf("First Function: f(x) = 2 * x\n\n")

        fmt.Printf("f(9) = %v\n", f.eval(9))
        fmt.Println("Latex Output: ", f.latex())
        fmt.Printf("Derivative Function: %v\n\n", f.derive())
        
        fmt.Printf("----------------------------------------- 2nd FUNCTION --------------------------------------\n\n")

        f = Func{Add{Var{}, Mult{Var{}, Var{}}}}
        fmt.Printf("First Function: f(x) = x + x * x\n\n")

        fmt.Printf("f(9) = %v\n", f.eval(9))
        fmt.Println("Latex Output: ", f.latex())
        fmt.Printf("Derivative Function: %v\n", f.derive())
        fmt.Printf("Value of derivative Function f(9): %v\n\n", f.derive().eval(9))

        fmt.Printf("----------------------------------------- 3rd FUNCTION --------------------------------------\n\n")
        f = Func{Pow{Var{}, Const{10}}}
        fmt.Printf("First Function: f(x) = x ^ 10\n\n")

        fmt.Printf("f(10) = %v\n", f.eval(10))
        fmt.Println("Latex Output: ", f.latex())
        fmt.Printf("1st derivative Function: %v\n", f.derive())
        fmt.Printf("2nd derivative Function: %v\n", f.derive().derive())
        fmt.Printf("3rd derivative Function: %v\n", f.derive().derive().derive())
        fmt.Printf("Value of 3rd derivative: f(1) = %v\n\n", f.derive().derive().derive().eval(1))

        fmt.Printf("----------------------------------------- 4th FUNCTION --------------------------------------\n\n")
        f = Func{Div{Var{}, Add{Const{10}, Const{20}}}}
        fmt.Printf("First Function: f(x) =  x / (10 + 20)\n\n")

        fmt.Printf("f(10) = %v\n", f.eval(30))
        fmt.Println("Latex Output: ", f.latex())
        fmt.Printf("1st derivative Function: %v\n", f.derive())
        fmt.Printf("2nd derivative Function: %v\n", f.derive().derive())
        fmt.Printf("Value of 1st derivative: f(1000000) = %v\n\n", f.derive().eval(1000000))

        fmt.Printf("----------------------------------------- 5th FUNCTION --------------------------------------\n\n")
        f = Func{Div{Var{}, Var{}}}
        fmt.Printf("First Function: f(x) =  x / x\n\n")

        fmt.Printf("f(30) = %v\n", f.eval(30))
        fmt.Println("Latex Output: ", f.latex())
        fmt.Printf("1st derivative Function: %v\n", f.derive())
        fmt.Printf("Value of 1st derivative: f(1000000) = %v\n\n", f.derive().eval(1000000))

        fmt.Printf("----------------------------------------- 6th FUNCTION --------------------------------------\n\n")
        f = Func{Sqrt{Var{}}}
        fmt.Printf("First Function: f(x) = \\sqrt{x}\n\n")

        fmt.Printf("f(9) = %v\n", f.eval(9))
        fmt.Println("Latex Output: ", f.latex())
        fmt.Printf("1st derivative Function: %v\n", f.derive())
        fmt.Printf("Value of 1st derivative: f(9) = %v\n\n", f.derive().eval(9))

        fmt.Printf("----------------------------------------- 7th FUNCTION --------------------------------------\n\n")
        fmt.Println("Live demo! :D")
        c := Func{Div{Var{}, Const{10}}}
        fmt.Println(c.derive().latex())
}</span>
</pre>
		
		<pre class="file" id="file1" style="display: none">package main

import (
        "fmt"
        "math"
)

// Interface, which all Expression types implement

type Expression interface {
        eval(num float64) float64
        derive() Expression
        latex() string
}

// Mathematical Function value: Starting Point for eDSL

type Func struct {
        fn Expression
}

func (f Func) String() string <span class="cov8" title="1">{
        return fmt.Sprintf(f.latex()[3 : len(f.latex())-3])
}</span>

func (f Func) eval(num float64) float64 <span class="cov8" title="1">{
        return f.fn.eval(num)
}</span>

func (f Func) derive() Expression <span class="cov8" title="1">{
        return Func{f.fn.derive()}
}</span>

func (f Func) latex() string <span class="cov8" title="1">{
        return fmt.Sprintf("\\( f(x) = %s \\)", f.fn.latex())
}</span>

// Used for Variable x

type Var struct{}

func (v Var) eval(num float64) float64 <span class="cov8" title="1">{
        return num
}</span>

func (v Var) derive() Expression <span class="cov8" title="1">{
        return Const{1}
}</span>

func (v Var) latex() string <span class="cov8" title="1">{
        return "x"
}</span>

// Used for Constant Value c

type Const struct {
        val float64
}

func (c Const) eval(num float64) float64 <span class="cov8" title="1">{
        return c.val
}</span>

func (c Const) derive() Expression <span class="cov8" title="1">{
        return Const{0}
}</span>

func (c Const) latex() string <span class="cov8" title="1">{
        return fmt.Sprintf("%g", c.val)
}</span>

/*
*        Begin of Operator List
*/

// Addition

type Add struct {
        left, right Expression
}

func (a Add) eval(num float64) float64 <span class="cov8" title="1">{
        return a.left.eval(num) + a.right.eval(num)
}</span>

func (a Add) derive() Expression <span class="cov8" title="1">{

        // Simplification logic

        if a.left.derive().latex() == "0" </span><span class="cov8" title="1">{
                return a.right.derive()
        }</span>
        <span class="cov8" title="1">if a.right.derive().latex() == "0" </span><span class="cov8" title="1">{
                return a.left.derive()
        }</span>

        <span class="cov8" title="1">return Add{a.left.derive(), a.right.derive()}</span>
}

func (a Add) latex() string <span class="cov8" title="1">{
        return fmt.Sprintf("%s + %s", a.left.latex(), a.right.latex())
}</span>

// Subtraction

type Sub struct {
        left, right Expression
}

func (s Sub) eval(num float64) float64 <span class="cov8" title="1">{
        return s.left.eval(num) - s.right.eval(num)
}</span>

func (s Sub) derive() Expression <span class="cov8" title="1">{

        //Simplification Logic

        if s.right.derive().latex() == "0" </span><span class="cov8" title="1">{
                return s.left.derive()
        }</span>

        <span class="cov8" title="1">return Sub{s.left.derive(), s.right.derive()}</span>
}

func (s Sub) latex() string <span class="cov8" title="1">{
        return fmt.Sprintf("%s - %s", s.left.latex(), s.right.latex())
}</span>

// Multiplication

type Mult struct {
        left, right Expression
}

func (m Mult) eval(num float64) float64 <span class="cov8" title="1">{
        return m.left.eval(num) * m.right.eval(num)
}</span>

func (m Mult) derive() Expression <span class="cov8" title="1">{

        // Simplification Logic

        if m.left.derive().eval(1) &gt; 0 &amp;&amp; m.right.derive().eval(1) &gt; 0 </span><span class="cov8" title="1">{
                return Add{
                        checkRedundancyMult(Mult{m.left.derive(), m.right}), 
                        checkRedundancyMult(Mult{m.left, m.right.derive()}),
                }
        }</span> else<span class="cov8" title="1"> if m.left.derive().eval(1) &gt; 0 </span><span class="cov8" title="1">{
                return checkRedundancyMult(Mult{m.left.derive(), m.right})
        }</span> else<span class="cov8" title="1"> if m.right.derive().eval(1) &gt; 0 </span><span class="cov8" title="1">{
                return checkRedundancyMult(Mult{m.left, m.right.derive()})
        }</span> else<span class="cov8" title="1"> {
                return Const{0}
        }</span>
}

func checkRedundancyMult(m Mult) Expression <span class="cov8" title="1">{
        if m.left.latex() == "1" </span><span class="cov8" title="1">{
                return m.right
        }</span> else<span class="cov8" title="1"> if m.right.latex() == "1" </span><span class="cov8" title="1">{
                return m.left
        }</span>
        <span class="cov8" title="1">return m</span>
}

func (m Mult) latex() string <span class="cov8" title="1">{
        return fmt.Sprintf("%s \\cdot %s", m.left.latex(), m.right.latex())
}</span>

// Division

type Div struct {
        left, right Expression
}

func (d Div) eval(num float64) float64 <span class="cov8" title="1">{
        return d.left.eval(num) / d.right.eval(num)
}</span>

func (d Div) derive() Expression <span class="cov8" title="1">{
        if d.left.derive().eval(0) != 0 &amp;&amp; d.right.derive().eval(0) != 0 </span><span class="cov8" title="1">{
                return Div{Sub{Mult{d.left.derive(), d.right}, Mult{d.left.derive(), d.right}}, Pow{d.right, Const{2}}}
        }</span> else<span class="cov8" title="1"> if d.left.derive().eval(0) != 0 </span><span class="cov8" title="1">{
                return Div{d.left.derive(), d.right}
        }</span> else<span class="cov8" title="1"> if d.right.derive().eval(0) != 0 </span><span class="cov8" title="1">{
                return Sub{Const{0}, Div{d.left, Pow{Var{}, Const{2}}}}
        }</span>
        <span class="cov8" title="1">return Const{0}</span>
}

func (d Div) latex() string <span class="cov8" title="1">{
        return fmt.Sprintf("\\frac{%s}{%s}", d.left.latex(), d.right.latex())
}</span>

// Power

type Pow struct {
        val Expression
        exp Const
}

func (p Pow) eval(num float64) float64 <span class="cov8" title="1">{
        return math.Pow(p.val.eval(num), p.exp.eval(num))
}</span>

func (p Pow) derive() Expression <span class="cov8" title="1">{
        if p.val.latex() == "x" </span><span class="cov8" title="1">{
                return Mult{p.exp, Pow{p.val, Const{p.exp.val - 1}}}
        }</span> else<span class="cov8" title="1"> {
                return Const{0}
        }</span>
}

func (p Pow) latex() string <span class="cov8" title="1">{
        return fmt.Sprintf("%s ^ %s", p.val.latex(), p.exp.latex())
}</span>

// Root

type Sqrt struct {
        val Expression
}

func (s Sqrt) eval(num float64) float64 <span class="cov8" title="1">{
        return math.Sqrt(s.val.eval(num))
}</span>

func (s Sqrt) derive() Expression <span class="cov8" title="1">{
        if s.val.eval(0) == 0 </span><span class="cov8" title="1">{
                return Div{Const{1}, Mult{Const{2}, s}}
        }</span>
        <span class="cov8" title="1">return Const{0}</span>
}

func (s Sqrt) latex() string <span class="cov8" title="1">{
        return fmt.Sprintf("\\sqrt{%s}", string(s.val.latex()[0]))
}</span>

/*
*        End of Operator List
*/</pre>
		
		</div>
	</body>
	<script>
	(function() {
		var files = document.getElementById('files');
		var visible;
		files.addEventListener('change', onChange, false);
		function select(part) {
			if (visible)
				visible.style.display = 'none';
			visible = document.getElementById(part);
			if (!visible)
				return;
			files.value = part;
			visible.style.display = 'block';
			location.hash = part;
		}
		function onChange() {
			select(files.value);
			window.scrollTo(0, 0);
		}
		if (location.hash != "") {
			select(location.hash.substr(1));
		}
		if (!visible) {
			select("file0");
		}
	})();
	</script>
</html>
